#!/bin/bash

/opt/confidential-containers/bin/qemu-system-x86_64
-serial
stdio
-debugcon
file:/tmp/ovmf.log
-global
isa-debugcon.iobase=0x402
-name
sandbox-e1e66e2e6b43253cd8c22133930cadbc355b01fb54a7229464272ab78b0dcd80
-uuid
54e0db20-5182-4567-8949-ed324caf9b24
-cpu
host,pmu=off
-qmp
unix:fd=3,server=on,wait=off
-monitor
unix:path=/run/vc/vm/e1e66e2e6b43253cd8c22133930cadbc355b01fb54a7229464272ab78b0dcd80/hmp.sock,server=on,wait=off
-m
2048M,slots=10,maxmem=257720M
-device
pci-bridge,bus=pcie.0,id=pci-bridge-0,chassis_nr=1,shpc=off,addr=2,io-reserve=4k,mem-reserve=1m,pref64-reserve=1m
-device
virtio-serial-pci,disable-modern=false,id=serial0
-device
virtconsole,chardev=charconsole0,id=console0
-chardev
socket,id=charconsole0,path=/run/vc/vm/e1e66e2e6b43253cd8c22133930cadbc355b01fb54a7229464272ab78b0dcd80/console.sock,server=on,wait=off
-device
virtio-scsi-pci,id=scsi0,disable-modern=false
-object
sev-guest,id=sev,cbitpos=51,reduced-phys-bits=5,policy=3,dh-cert-file=/tmp/sev/56d3f25b-df48-4c1b-860f-f9d1cb2eb1f4/godh.b64,session-file=/tmp/sev/56d3f25b-df48-4c1b-860f-f9d1cb2eb1f4/session_file.b64,kernel-hashes=on
-object
rng-random,id=rng0,filename=/dev/urandom
-device
virtio-rng-pci,rng=rng0
-device
vhost-vsock-pci,disable-modern=false,vhostfd=4,id=vsock-2065361807,guest-cid=2065361807
-device
virtio-9p-pci,disable-modern=false,fsdev=extra-9p-kataShared,mount_tag=kataShared
-fsdev
local,id=extra-9p-kataShared,path=/run/kata-containers/shared/sandboxes/e1e66e2e6b43253cd8c22133930cadbc355b01fb54a7229464272ab78b0dcd80/shared,security_model=none,multidevs=remap
-netdev
tap,id=network-0,vhost=on,vhostfds=5,fds=6
-device
driver=virtio-net-pci,netdev=network-0,mac=6e:8b:f0:9c:87:d3,disable-modern=false,mq=on,vectors=4
-rtc
base=utc,driftfix=slew,clock=host
-global
kvm-pit.lost_tick_policy=discard
-vga
none
-no-user-config
-nodefaults
-nographic
--no-reboot
-object
memory-backend-ram,id=dimm1,size=2048M
-numa
node,memdev=dimm1
-S
-kernel
/opt/confidential-containers/share/kata-containers/vmlinuz-5.19.2-109cc+-sev
-initrd
/opt/confidential-containers/share/kata-containers/kata-containers-initrd-sev-csg.img
-append
tsc=reliable
no_timer_check
rcupdate.rcu_expedited=1
i8042.direct=1
i8042.dumbkbd=1
i8042.nopnp=1
i8042.noaux=1
noreplace-smp
reboot=k
cryptomgr.notests
net.ifnames=0
pci=lastbus=0
console=hvc0
console=hvc1
debug
panic=1
nr_cpus=1
selinux=0
agent.aa_kbc_params=online_sev_kbc::10.160.40.149:44444
scsi_mod.scan=none
agent.log=debug
agent.debug_console
agent.debug_console_vport=1026
agent.config_file=/etc/agent-config.toml
agent.enable_signature_verification=true
-pidfile
/run/vc/vm/e1e66e2e6b43253cd8c22133930cadbc355b01fb54a7229464272ab78b0dcd80/pid
-smp
1,cores=1,threads=1,sockets=1,maxcpus=1
-s
-S
