apiVersion: apps/v1
kind: Deployment
metadata:
  name: coco-helloworld-py
  labels:
    apps.coco-serverless/name: helloworld-py
  annotations: 
    io.containerd.cri.runtime-handler: kata-qemu-sev
spec:
  replicas: 1
  selector:
    matchLabels:
      apps.coco-serverless/name: helloworld-py
  template:
    metadata:
      labels:
        apps.coco-serverless/name: helloworld-py
        io.katacontainers.config.pre_attestation.enabled: "false" 
    spec:
      runtimeClassName: kata-qemu-sev
      containers:
      - name: helloworld-py
        image: registry.coco-csg.com/hello-world-flask-nydus:latest  #konsougiou/alpine-sev-tests:flask #localhost:5000/hello-world-flask-nydus:latest
        imagePullPolicy: IfNotPresent
        ports:
        - containerPort: 8080
      #   volumeMounts:  
      #   - name: ca-certstore
      #     mountPath: /home/ksougioultzoglou/FYP/coco-serverless-fyp/.config/local-registry/domain.crt
      #   env:
      #   - name: SSL_CERT_DIR
      #     value: /home/ksougioultzoglou/FYP/coco-serverless-fyp/.config/local-registry/domain.crt
      # volumes:  
      # - name: ca-certstore
      #   configMap:
      #     name: ca-certstore
